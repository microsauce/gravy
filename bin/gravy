#! /bin/sh

if [ "$GRAVY_HOME" = "" ]; then
	echo fail: GRAVY_HOME is not set.
	exit
fi
if [ "$JAVA_HOME" = "" ]; then
	echo fail: JAVA_HOME is not set.
	exit
fi

# build classpath
JARS="$GRAVY_HOME/lib/groovy/*"
for f in $JARS
do
	separator=":"
	if [ "$first" = "first" ]; then
		separator=""
		first=""
	fi

  	cp="$cp$separator$f"
done

JARS="$GRAVY_HOME/lib/rhino/*"
for f in $JARS
do
	separator=":"
	if [ "$first" = "first" ]; then
		separator=""
		first=""
	fi

  	cp="$cp$separator$f"
done

JARS="$GRAVY_HOME/lib/ringojs/*"
for f in $JARS
do
	separator=":"
	if [ "$first" = "first" ]; then
		separator=""
		first=""
	fi

  	cp="$cp$separator$f"
done

JARS="$GRAVY_HOME/lib/jruby/*"
for f in $JARS
do
	separator=":"
	if [ "$first" = "first" ]; then
		separator=""
		first=""
	fi

  	cp="$cp$separator$f"
done

JARS="$JAVA_HOME/lib/*.jar"
for f in $JARS
do
	separator=":"
	if [ "$first" = "first" ]; then
		separator=""
		first=""
	fi

  	cp="$cp$separator$f"
done

$JAVA_HOME/bin/java -cp $GRAVY_HOME/lib/gravy.jar:$cp:$GRAVY_HOME/lib/log4j-1.2.16.jar org.codehaus.groovy.tools.GroovyStarter --classpath $cp --main groovy.ui.GroovyMain $GRAVY_HOME/bin/scripts/commandLine.groovy "$@"
